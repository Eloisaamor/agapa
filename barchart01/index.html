<!doctype html>
<html>

<head>
	<title>Distribución del gasto público</title>
	<script src="Chart.min.js"></script>
	<meta charset="utf-8"/>
</head>

<body>
	
	<div id="canvas-holder" style="width: 100%">
		<canvas id="myChart" width="600" height="400"></canvas>
	</div>
	
	<script>
var ctx = document.getElementById("myChart");
var myChart = new Chart(ctx, {
  type: 'horizontalBar',
  data: {
    labels: ["Viviendas y servicios comunitarios", "Protección del medio ambiente", "Defensa ","Actividades recreativas, cultura y religión ","Orden público y seguridad ","Asuntos económicos ","Educación ","Servicios públicos generales ","Salud ","Protección social (desempleo, pensiones)"],
    datasets: [{
      label: 'Gasto público en España en 2017 ',
      data: [5.534, 9.905, 10.365, 12.676, 21.346, 43.960, 45.936, 64.769, 69.258, 192.794],
      backgroundColor: [
        '#098137',
        '#098137',
        '#098137',
        '#098137',
        '#098137',
        '#098137',
		'#098137',
		'#098137',
		'#098137',
		'#098137'
      ],
      borderWidth: 0,	
    }]
  },
  options: {
    responsive: false,
	legend: {
            labels: {              
                 fontColor: "#098137",
            }},
    scales: {
      xAxes: [{
        ticks: {
          maxRotation: 90,
          minRotation: 80,		  
          fontColor: "#098137",
                
        },
		gridLines: {
			display: true,						
			zeroLineWidth:2,
			zeroLineColor:'#098137',
			z:0						
			},
		scaleLabel: {
			display:true,
			labelString: 'Millones de euros',
			fontSize:12,
			fontColor: "#098137",
			}
      }],
      yAxes: [{
		ticks: {
			beginAtZero: true,
			
			fontColor: "#098137",
			},

		gridLines: {
			display: true,						
			zeroLineWidth:2,
			zeroLineColor:'#098137',
			z:1
			}
		}],
    },
	 tooltips: {
	 backgroundColor: '#14441f',
      callbacks: {
        title: function(tooltipItem, data) {
          return  data['labels'][tooltipItem[0]['index']];
        },
		label: function(tooltipItem, data) {
		 var dataset = data['datasets'][0];
		 var total = dataset['data'].reduce((a, b) => a + b, 0);
          var percent =  (Math.round((dataset['data'][tooltipItem['index']] / total) * 10000)/100);
          return data['datasets'][0]['data'][tooltipItem['index']]+' M€ (' + percent.toString().replace('.', ',') + '%)';
        },

        afterLabel: function(tooltipItem, data) {
          var dataset = data['datasets'][0];
		  var total = dataset['data'].reduce((a, b) => a + b, 0);
          var percent =  Math.round((dataset['data'][tooltipItem['index']] / total) * 10000)/100;
          return '';// '(' + percent + '%)';
        }
      } },
	
	
  }
});
		
	</script>
</body>

</html>
